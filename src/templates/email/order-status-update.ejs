<% 
const content = `
<h2>📦 订单状态更新</h2>

<p>亲爱的 ${username}，</p>

<p>您的订单状态已更新，请查看最新信息：</p>

<div class="success-box">
    <p><strong>📋 订单信息：</strong></p>
    <p><strong>订单号：</strong>${orderNo}</p>
    <p><strong>当前状态：</strong><span style="color: #38a169; font-weight: bold;">${statusText}</span></p>
    <p><strong>更新时间：</strong>${updateTime}</p>
</div>

<% if (status === 'paid') { %>
<div class="success-box">
    <h3>✅ 支付成功！</h3>
    <p>您的订单已支付成功，我们正在为您准备商品，预计1-2个工作日内发货。</p>
</div>
<% } else if (status === 'shipped') { %>
<div class="info-box">
    <h3>🚚 商品已发货！</h3>
    <p>您的订单已发货，商品正在配送途中，请保持手机畅通，注意查收。</p>
    <p>预计送达时间：2-3个工作日</p>
</div>
<% } else if (status === 'delivered') { %>
<div class="success-box">
    <h3>🎉 订单已完成！</h3>
    <p>您的订单已成功送达，感谢您在 ${siteName} 购物！</p>
    <p>如果您对商品满意，欢迎给我们好评和分享。</p>
</div>
<% } else if (status === 'cancelled') { %>
<div class="error-box">
    <h3>❌ 订单已取消</h3>
    <p>您的订单已取消，如果已支付，退款将在3-5个工作日内原路返回。</p>
    <p>如有疑问，请联系客服。</p>
</div>
<% } %>

<div style="text-align: center; margin: 30px 0;">
    <a href="${siteUrl}/orders/${orderNo}" class="btn">
        📱 查看订单详情
    </a>
</div>

<% if (status === 'shipped') { %>
<h3>📋 物流跟踪：</h3>
<div class="info-box">
    <p>您可以通过以下方式跟踪包裹：</p>
    <ul style="margin-left: 20px;">
        <li>登录账户查看物流信息</li>
        <li>关注我们的微信公众号获取推送</li>
        <li>联系客服获取快递单号</li>
    </ul>
</div>
<% } %>

<% if (status === 'delivered') { %>
<h3>⭐ 评价有礼：</h3>
<div class="success-box">
    <p>完成订单评价，即可获得：</p>
    <ul style="margin-left: 20px;">
        <li>🎁 积分奖励</li>
        <li>🎫 专属优惠券</li>
        <li>💰 下次购物折扣</li>
    </ul>
</div>
<% } %>

<div class="warning-box">
    <p><strong>💡 温馨提示：</strong></p>
    <ul style="margin-left: 20px;">
        <li>如有任何问题，请及时联系客服</li>
        <li>保持手机畅通，方便配送联系</li>
        <li>感谢您选择 ${siteName}！</li>
    </ul>
</div>
`;
%>

<%- include('base', { content: content, subject: '订单状态更新', siteName, siteUrl, supportEmail, currentYear, timestamp }) %>